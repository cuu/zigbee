###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.40338/W32 for 8051         25/Jan/2015  17:06:14 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\weikong\Source\guu_mt.c            #
#    Command line       =  -f "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\..\..\..\Too #
#                          ls\CC2530DB\f8wRouter.cfg" (-DCPU32MHZ             #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f "C:\Texas         #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\Tools\CC2530DB\f #
#                          8wConfig.cfg" (-DZIGBEEPRO -DSECURE=0              #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "C:\Texas                   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\weikong\Source\guu_mt.c" -D ZTOOL_P1 -D     #
#                          MT_TASK -D MT_AF_FUNC -D MT_AF_CB_FUNC -D          #
#                          MT_APP_FUNC -D MT_DEBUG_FUNC -D MT_NWK_FUNC -D     #
#                          MT_NWK_CB_FUNC -D MT_SYS_FUNC -D MT_SYS_FUNC -D    #
#                          MT_ZDO_FUNC -D MT_UTIL_FUNC -D MT_ZDO_CB_FUNC -D   #
#                          MT_ZDO_MGMT -D LCD_SUPPORTED=FALSE -D              #
#                          HAL_LCD=FALSE -D HAL_LED=FALSE -D                  #
#                          GUU_HAL_LED=TRUE -D NV_INIT -D NV_RESTORE -D       #
#                          xPOWER_SAVING -lC "C:\Texas                        #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\Router\List\" -lA         #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\Router\List\"   #
#                          --diag_suppress Pe001,Pa010 -o "C:\Texas           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\Router\Obj\" -e           #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\" -I         #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\Source\" -I  #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\..\..\ZMain\ #
#                          TI2530DB\" -I "C:\Texas Instruments\ZStack-CC2530- #
#                          2.5.1a\Projects\zstack\Samples\GenericApp\CC2531\. #
#                          .\..\..\..\..\Components\hal\include\" -I          #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\..\..\..\..\ #
#                          Components\hal\target\CC2530USB\" -I "C:\Texas     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \hal\target\CC2530USB\usb\library\" -I "C:\Texas   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \hal\target\CC2530USB\usb\library\cc2531\" -I      #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\..\..\..\..\ #
#                          Components\hal\target\CC2530USB\usb\class_cdc\"    #
#                          -I "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\..\..\..\..\ #
#                          ..\Components\mac\include\" -I "C:\Texas           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mac\high_level\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mac\low_level\srf04\" -I "C:\Texas                #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mac\low_level\srf04\single_chip\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mt\" -I "C:\Texas Instruments\ZStack-CC2530-2.5.1 #
#                          a\Projects\zstack\Samples\GenericApp\CC2531\..\..\ #
#                          ..\..\..\Components\osal\include\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \services\saddr\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \services\sdata\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\af\" -I "C:\Texas                           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\nwk\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\sapi\" -I "C:\Texas                         #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\sec\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\sys\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\zdo\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \zmac\" -I "C:\Texas Instruments\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\GenericApp\CC2531\..\. #
#                          .\..\..\..\Components\zmac\f8w\" -I "C:\Texas      #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\weikong\Source\"    #
#                          -Ohz --require_prototypes                          #
#    List file          =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\GenericApp\CC2531\Router\List\guu_ #
#                          mt.lst                                             #
#    Object file        =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\GenericApp\CC2531\Router\Obj\guu_m #
#                          t.r51                                              #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\weikong\Source\guu_mt.c
      1          #include "OSAL.h"
      2          #include "OSAL_Nv.h"
      3          #include "AF.h"
      4          #include "ZDApp.h"
      5          #include "ZDObject.h"
      6          #include "ZDProfile.h"
      7          
      8          #include "ZComDef.h"
      9          #include "MT.h"        /* This is here because all the SPI_CMD_XXX are defined in this header */
     10          #include "MT_APP.h"
     11          #include "MT_AF.h"     /* This is here because this MT_APP makes some routine call to AF */

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc9
   \   unsigned char volatile __sfr WDCTL
   \                     WDCTL:
   \   000000                DS 1
     12          #include "MT_RPC.h"
     13          #include "MT_UART.h"
     14          
     15          /* HAL */
     16          #include "hal_lcd.h"
     17          #include "hal_led.h"
     18          #include "hal_key.h"
     19          #include "hal_uart.h"
     20          
     21          #include "GenericApp.h"
     22          #include "guu_common_def.h"
     23          #include "base.h"
     24          #include "serial.h"
     25          #include "guu_mt.h"
     26          #include "guu_data.h"
     27          #include "guu_io.h"
     28          #include "guu_key.h"
     29          #include "guu_event.h"
     30          #include "guu_init.h"
     31          #include "guu_proto.h"
     32          /*
     33          MT
     34          SOF         MT CMD        FCS 
     35          byte:1      3-256         1
     36          
     37          MT CMD
     38          LEN         CMD           DATA
     39          Byte: 1     2             0-253 
     40          
     41            
     42              CMD0                            CMD1
     43          Bit: 7-5        4-0                 7-0
     44               Type     Subsystem             ID
     45          
     46          
     47          Type CMD0Value
     48          POLL 0x00
     49          SREQ 0x20
     50          AREQ 0x40
     51          SRSP 0x60
     52          
     53          Subsystem       Subsystem Value
     54          Reserved        0x00
     55          SYS interface   0x01
     56          MAC interface   0x02
     57          NWK interface   0x03
     58          AF interface    0x04
     59          ZDO interface   0x05
     60          SAPI interface  0x06
     61          UTIL interface  0x07
     62          DEBUG interface 0x08
     63          APP interface   0x09
     64          
     65          
     66          */
     67          extern byte GenericApp_TransID;
     68          
     69          static void guu_mt_af(uint8 *pBuf)
     70          {
     71            uint8 *msgPtr;
     72            uint8 dataLen = pBuf[0]; /* Data length is on byte #1 from the pointer */
     73          
     74            /* Move back to the SOP */
     75            msgPtr = pBuf-1;
     76          
     77            /* Insert SOP */
     78            msgPtr[0] = MT_UART_SOF;
     79          
     80            /* Insert FCS */
     81            msgPtr[SPI_0DATA_MSG_LEN - 1 + dataLen] = MT_UartCalcFCS (pBuf, (3 + dataLen));
     82          
     83            MT_AfDataRequest(&msgPtr[1]);
     84            /* Deallocate */
     85            osal_msg_deallocate(msgPtr);
     86          }
     87          
     88          static void guu_mt_build_and_send_af(uint8 cmdType, uint8 cmdId, uint8 dataLen, uint8 *pData)
     89          {
     90            uint8 *msg_ptr;
     91            // 先生成一个buff,然后把前3位的MT部分,填上长度,cmd1 cmd2,然后把pData复制到msg_ptr[3]
     92            /* Allocate memory including SOP and FCS */
     93            msg_ptr = MT_TransportAlloc((mtRpcCmdType_t)(cmdType & 0xE0), dataLen);
     94          
     95            if (msg_ptr)
     96            {
     97              /* Build the message */
     98              MT_BuildSPIMsg(cmdType, cmdId, msg_ptr, dataLen, pData);
     99              /* Send out the msg */
    100              guu_mt_af(msg_ptr);
    101              //msg_ptr由guu_mt_af释放
    102            }
    103          }
    104          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    105          void guu_mt_af_req( uint16 dstAddr,uint8 len,uint8*buff)
   \                     guu_mt_af_req:
    106          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 2,R2
   \   000007   8B..         MOV     ?V0 + 3,R3
   \   000009   89..         MOV     ?V0 + 4,R1
   \   00000B   EC           MOV     A,R4
   \   00000C   FE           MOV     R6,A
   \   00000D   ED           MOV     A,R5
   \   00000E   FF           MOV     R7,A
    107            ///这个代码其实有很大疑问,我从AF.c的afBuildMSGIncoming 中依样而来
    108            mt_af_data_req_t * msgptr;
    109            msgptr = (mt_af_data_req_t *)osal_msg_allocate(sizeof(mt_af_data_req_t) + len);
   \   00000F   8982         MOV     DPL,R1
   \   000011   8582..       MOV     ?V0 + 6,DPL
   \   000014                ; Setup parameters for call to function osal_msg_allocate
   \   000014   E9           MOV     A,R1
   \   000015   240C         ADD     A,#0xc
   \   000017   FA           MOV     R2,A
   \   000018   E4           CLR     A
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
   \   00001C   12....       LCALL   ??osal_msg_allocate?relay
   \   00001F   8A..         MOV     ?V0 + 0,R2
   \   000021   8B..         MOV     ?V0 + 1,R3
    110            msgptr->dst_addr = dstAddr;
   \   000023   8A82         MOV     DPL,R2
   \   000025   8B83         MOV     DPH,R3
   \   000027   E5..         MOV     A,?V0 + 2
   \   000029   F0           MOVX    @DPTR,A
   \   00002A   A3           INC     DPTR
   \   00002B   E5..         MOV     A,?V0 + 3
   \   00002D   F0           MOVX    @DPTR,A
    111            msgptr->dst_end_point = GENERICAPP_ENDPOINT;
   \   00002E   8A82         MOV     DPL,R2
   \   000030   8B83         MOV     DPH,R3
   \   000032   A3           INC     DPTR
   \   000033   A3           INC     DPTR
   \   000034   7414         MOV     A,#0x14
   \   000036   F0           MOVX    @DPTR,A
    112            msgptr->src_end_point = GENERICAPP_ENDPOINT;
   \   000037   8A82         MOV     DPL,R2
   \   000039   8B83         MOV     DPH,R3
   \   00003B   12....       LCALL   ?Subroutine3 & 0xFFFF
    113            msgptr->cluster_id =  GENERICAPP_CLUSTERID;
   \                     ??CrossCallReturnLabel_7:
   \   00003E   7401         MOV     A,#0x1
   \   000040   F0           MOVX    @DPTR,A
   \   000041   A3           INC     DPTR
   \   000042   E4           CLR     A
   \   000043   F0           MOVX    @DPTR,A
    114            msgptr->trans_id = GenericApp_TransID;
   \   000044   90....       MOV     DPTR,#GenericApp_TransID
   \   000047   E0           MOVX    A,@DPTR
   \   000048   8A82         MOV     DPL,R2
   \   00004A   8B83         MOV     DPH,R3
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   12....       LCALL   ?Subroutine3 & 0xFFFF
    115            msgptr->option = AF_DISCV_ROUTE;
   \                     ??CrossCallReturnLabel_8:
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   7420         MOV     A,#0x20
   \   000057   12....       LCALL   ?Subroutine0 & 0xFFFF
    116            msgptr->radius = AF_DEFAULT_RADIUS;
   \                     ??CrossCallReturnLabel_0:
   \   00005A   741E         MOV     A,#0x1e
   \   00005C   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   00005F   A3           INC     DPTR
   \   000060   E5..         MOV     A,?V0 + 4
   \   000062   F0           MOVX    @DPTR,A
    117            msgptr->Data.data_len = len;
    118            msgptr->Data.data = (uint8*)(msgptr+1);//这儿是指向了msgptr+sizeof(mt_af_data_req_t) 后面的内存
   \   000063   EA           MOV     A,R2
   \   000064   240A         ADD     A,#0xa
   \   000066   F8           MOV     R0,A
   \   000067   EB           MOV     A,R3
   \   000068   3400         ADDC    A,#0x0
   \   00006A   F9           MOV     R1,A
   \   00006B   E8           MOV     A,R0
   \   00006C   FA           MOV     R2,A
   \   00006D   E9           MOV     A,R1
   \   00006E   FB           MOV     R3,A
   \   00006F   E5..         MOV     A,?V0 + 0
   \   000071   240C         ADD     A,#0xc
   \   000073   08           INC     R0
   \   000074   08           INC     R0
   \   000075   E5..         MOV     A,?V0 + 1
   \   000077   3400         ADDC    A,#0x0
   \   000079   F9           MOV     R1,A
   \   00007A   8A82         MOV     DPL,R2
   \   00007C   8B83         MOV     DPH,R3
   \   00007E   E8           MOV     A,R0
   \   00007F   F0           MOVX    @DPTR,A
   \   000080   A3           INC     DPTR
   \   000081   E9           MOV     A,R1
   \   000082   F0           MOVX    @DPTR,A
    119            osal_memcpy(msgptr->Data.data, buff, msgptr->Data.data_len);
   \   000083                ; Setup parameters for call to function osal_memcpy
   \   000083   8E..         MOV     ?V0 + 8,R6
   \   000085   8F..         MOV     ?V0 + 9,R7
   \   000087   75..00       MOV     ?V0 + 10,#0x0
   \   00008A   78..         MOV     R0,#?V0 + 8
   \   00008C   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00008F   AC..         MOV     R4,?V0 + 6
   \   000091   7D00         MOV     R5,#0x0
   \   000093   8A82         MOV     DPL,R2
   \   000095   8B83         MOV     DPH,R3
   \   000097   E0           MOVX    A,@DPTR
   \   000098   FA           MOV     R2,A
   \   000099   A3           INC     DPTR
   \   00009A   E0           MOVX    A,@DPTR
   \   00009B   FB           MOV     R3,A
   \   00009C   12....       LCALL   ??osal_memcpy?relay
   \   00009F   7403         MOV     A,#0x3
   \   0000A1   12....       LCALL   ?DEALLOC_XSTACK8
    120            
    121            guu_mt_build_and_send_af(MT_RPC_CMD_SREQ  | (uint8) MT_RPC_SYS_AF, MT_AF_DATA_REQUEST, sizeof(mt_af_data_req_t) + len, (uint8*)msgptr);
   \   0000A4   740C         MOV     A,#0xc
   \   0000A6   25..         ADD     A,?V0 + 4
   \   0000A8   F5..         MOV     ?V0 + 2,A
   \   0000AA                ; Setup parameters for call to function MT_TransportAlloc
   \   0000AA   FA           MOV     R2,A
   \   0000AB   7920         MOV     R1,#0x20
   \   0000AD   12....       LCALL   ??MT_TransportAlloc?relay
   \   0000B0   8A..         MOV     ?V0 + 6,R2
   \   0000B2   8B..         MOV     ?V0 + 7,R3
   \   0000B4   AE..         MOV     R6,?V0 + 6
   \   0000B6   AF..         MOV     R7,?V0 + 7
   \   0000B8   EE           MOV     A,R6
   \   0000B9   4F           ORL     A,R7
   \   0000BA   6063         JZ      ??guu_mt_af_req_0
   \   0000BC                ; Setup parameters for call to function MT_BuildSPIMsg
   \   0000BC   78..         MOV     R0,#?V0 + 0
   \   0000BE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C1   AB..         MOV     R3,?V0 + 2
   \   0000C3   EE           MOV     A,R6
   \   0000C4   FC           MOV     R4,A
   \   0000C5   EF           MOV     A,R7
   \   0000C6   FD           MOV     R5,A
   \   0000C7   7A01         MOV     R2,#0x1
   \   0000C9   7924         MOV     R1,#0x24
   \   0000CB   12....       LCALL   ??MT_BuildSPIMsg?relay
   \   0000CE   7402         MOV     A,#0x2
   \   0000D0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000D3   8E82         MOV     DPL,R6
   \   0000D5   8F83         MOV     DPH,R7
   \   0000D7   E0           MOVX    A,@DPTR
   \   0000D8   F5..         MOV     ?V0 + 6,A
   \   0000DA   EE           MOV     A,R6
   \   0000DB   24FF         ADD     A,#-0x1
   \   0000DD   F5..         MOV     ?V0 + 2,A
   \   0000DF   EF           MOV     A,R7
   \   0000E0   34FF         ADDC    A,#-0x1
   \   0000E2   F5..         MOV     ?V0 + 3,A
   \   0000E4   85..82       MOV     DPL,?V0 + 2
   \   0000E7   F583         MOV     DPH,A
   \   0000E9   74FE         MOV     A,#-0x2
   \   0000EB   F0           MOVX    @DPTR,A
   \   0000EC                ; Setup parameters for call to function MT_UartCalcFCS
   \   0000EC   7403         MOV     A,#0x3
   \   0000EE   25..         ADD     A,?V0 + 6
   \   0000F0   F9           MOV     R1,A
   \   0000F1   EE           MOV     A,R6
   \   0000F2   FA           MOV     R2,A
   \   0000F3   EF           MOV     A,R7
   \   0000F4   FB           MOV     R3,A
   \   0000F5   12....       LCALL   ??MT_UartCalcFCS?relay
   \   0000F8   E5..         MOV     A,?V0 + 2
   \   0000FA   25..         ADD     A,?V0 + 6
   \   0000FC   F582         MOV     DPL,A
   \   0000FE   E5..         MOV     A,?V0 + 3
   \   000100   3400         ADDC    A,#0x0
   \   000102   F583         MOV     DPH,A
   \   000104   A3           INC     DPTR
   \   000105   A3           INC     DPTR
   \   000106   A3           INC     DPTR
   \   000107   A3           INC     DPTR
   \   000108   E9           MOV     A,R1
   \   000109   F0           MOVX    @DPTR,A
   \   00010A                ; Setup parameters for call to function MT_AfDataRequest
   \   00010A   85..82       MOV     DPL,?V0 + 2
   \   00010D   85..83       MOV     DPH,?V0 + 3
   \   000110   A3           INC     DPTR
   \   000111   AA82         MOV     R2,DPL
   \   000113   AB83         MOV     R3,DPH
   \   000115   12....       LCALL   ??MT_AfDataRequest?relay
   \   000118                ; Setup parameters for call to function osal_msg_deallocate
   \   000118   AA..         MOV     R2,?V0 + 2
   \   00011A   AB..         MOV     R3,?V0 + 3
   \   00011C   12....       LCALL   ??osal_msg_deallocate?relay
    122            osal_msg_deallocate((uint8*)msgptr);
   \                     ??guu_mt_af_req_0:
   \   00011F                ; Setup parameters for call to function osal_msg_deallocate
   \   00011F   AA..         MOV     R2,?V0 + 0
   \   000121   AB..         MOV     R3,?V0 + 1
   \   000123   12....       LCALL   ??osal_msg_deallocate?relay
    123            
    124          }
   \   000126   7F0B         MOV     R7,#0xb
   \   000128   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002   A3           INC     DPTR
   \   000003   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   22           RET
    125          // guu_mt_build(MT_RPC_CMD_SREQ  | (uint8) MT_RPC_SYS_AF,cmdId,len,buf);
    126          
    127          static void guu_panid(void)
    128          {
    129            uint8 retArray[2];
    130          
    131            /* Convert to high byte first into temp buffer */
    132            retArray[0] = LO_UINT16( _NIB.nwkPanId );
    133            retArray[1] = HI_UINT16( _NIB.nwkPanId );
    134          
    135            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_APP), GUU_PANID_RET,
    136                                          sizeof (uint16), retArray );  
    137          }
    138          
    139          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    140          uint8 guu_mt_app_user_test_cb(app_user_test_t *ptr)//从MT_APP.c引进APP_USER_TEST 引进
   \                     guu_mt_app_user_test_cb:
    141          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    142            uint8*p;
    143              
    144            switch(ptr->cmdid)
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 0,A
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F5..         MOV     ?V0 + 1,A
   \   00001B   78..         MOV     R0,#?V0 + 0
   \   00001D   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for guu_mt_app_user_test_cb>_0`:
   \   000020   1200         DW        18
   \   000022   0F           DB        15
   \   000023   ....         DW        ??guu_mt_app_user_test_cb_0
   \   000025   ....         DW        ??guu_mt_app_user_test_cb_1
   \   000027   ....         DW        ??guu_mt_app_user_test_cb_2
   \   000029   ....         DW        ??guu_mt_app_user_test_cb_3
   \   00002B   ....         DW        ??guu_mt_app_user_test_cb_4
   \   00002D   ....         DW        ??guu_mt_app_user_test_cb_5
   \   00002F   ....         DW        ??guu_mt_app_user_test_cb_6
   \   000031   ....         DW        ??guu_mt_app_user_test_cb_7
   \   000033   ....         DW        ??guu_mt_app_user_test_cb_8
   \   000035   ....         DW        ??guu_mt_app_user_test_cb_0
   \   000037   ....         DW        ??guu_mt_app_user_test_cb_0
   \   000039   ....         DW        ??guu_mt_app_user_test_cb_0
   \   00003B   ....         DW        ??guu_mt_app_user_test_cb_0
   \   00003D   ....         DW        ??guu_mt_app_user_test_cb_0
   \   00003F   ....         DW        ??guu_mt_app_user_test_cb_0
   \   000041   ....         DW        ??guu_mt_app_user_test_cb_9
   \   000043   ....         DW        ??guu_mt_app_user_test_cb_10
    145            {
    146            case GUU_EXEC_IO:
    147              {
    148                p = (uint8*)ptr;
    149                p+=4;
    150                HalLedSet (HAL_LED_1, HAL_LED_MODE_FLASH); 
   \                     ??guu_mt_app_user_test_cb_4:
   \   000045                ; Setup parameters for call to function HalLedSet
   \   000045   7A04         MOV     R2,#0x4
   \   000047   7901         MOV     R1,#0x1
   \   000049   12....       LCALL   ??HalLedSet?relay
    151                exec_io((io_cmd_t*)p);//仅仅执行内存中已有的数据
   \   00004C                ; Setup parameters for call to function exec_io
   \   00004C   12....       LCALL   ?Subroutine1 & 0xFFFF
    152              }break;
   \                     ??CrossCallReturnLabel_2:
   \   00004F   12....       LCALL   ??exec_io?relay
   \   000052   02....       LJMP    ??guu_mt_app_user_test_cb_0 & 0xFFFF
    153            case GUU_EXEC_IO_CMD:
    154              {
    155                p = (uint8*)ptr;
    156                p+=4;
    157                
    158                exec_io_cmd((io_cmd_t*)p);//从Flash中读入数据到内存,并且执行
   \                     ??guu_mt_app_user_test_cb_1:
   \   000055                ; Setup parameters for call to function exec_io_cmd
   \   000055   12....       LCALL   ?Subroutine1 & 0xFFFF
    159              }break;
   \                     ??CrossCallReturnLabel_3:
   \   000058   12....       LCALL   ??exec_io_cmd?relay
   \   00005B   02....       LJMP    ??guu_mt_app_user_test_cb_0 & 0xFFFF
    160            case GUU_RESET_KEY:
    161              {
    162                p = (uint8*)ptr;
    163                reset_key_cmd( p[4] );
   \                     ??guu_mt_app_user_test_cb_2:
   \   00005E                ; Setup parameters for call to function reset_key_cmd
   \   00005E   8E82         MOV     DPL,R6
   \   000060   8F83         MOV     DPH,R7
   \   000062   A3           INC     DPTR
   \   000063   A3           INC     DPTR
   \   000064   A3           INC     DPTR
   \   000065   A3           INC     DPTR
   \   000066   E0           MOVX    A,@DPTR
   \   000067   F9           MOV     R1,A
   \   000068   12....       LCALL   ??reset_key_cmd?relay
    164              }break;
   \   00006B   02....       LJMP    ??guu_mt_app_user_test_cb_0 & 0xFFFF
    165            case GUU_IO_OPERA:
    166              {
    167                //HalLedSet (HAL_LED_1, HAL_LED_MODE_TOGGLE); 
    168                p = (uint8*)ptr;
    169                p+=4;
    170                
    171                guu_io_opera( (guu_io_opera_t *)p);
   \                     ??guu_mt_app_user_test_cb_3:
   \   00006E                ; Setup parameters for call to function guu_io_opera
   \   00006E   12....       LCALL   ?Subroutine1 & 0xFFFF
    172              }break;
   \                     ??CrossCallReturnLabel_4:
   \   000071   12....       LCALL   ??guu_io_opera?relay
   \   000074   02....       LJMP    ??guu_mt_app_user_test_cb_0 & 0xFFFF
    173            case GUU_PANID:
    174              {
    175                HalLedSet (HAL_LED_1, HAL_LED_MODE_BLINK); 
   \                     ??guu_mt_app_user_test_cb_5:
   \   000077                ; Setup parameters for call to function HalLedSet
   \   000077   7A02         MOV     R2,#0x2
   \   000079   7901         MOV     R1,#0x1
   \   00007B   12....       LCALL   ??HalLedSet?relay
    176                guu_panid();
   \   00007E   90....       MOV     DPTR,#_NIB + 33
   \   000081   E0           MOVX    A,@DPTR
   \   000082   85..82       MOV     DPL,?XSP + 0
   \   000085   85..83       MOV     DPH,?XSP + 1
   \   000088   F0           MOVX    @DPTR,A
   \   000089   90....       MOV     DPTR,#_NIB + 34
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   C0E0         PUSH    A
   \   00008F   7401         MOV     A,#0x1
   \   000091   12....       LCALL   ?XSTACK_DISP0_8
   \   000094   D0E0         POP     A
   \   000096   F0           MOVX    @DPTR,A
   \   000097                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000097   85..82       MOV     DPL,?XSP + 0
   \   00009A   85..83       MOV     DPH,?XSP + 1
   \   00009D   AC82         MOV     R4,DPL
   \   00009F   AD83         MOV     R5,DPH
   \   0000A1   7B02         MOV     R3,#0x2
   \   0000A3   7A02         MOV     R2,#0x2
   \   0000A5   7969         MOV     R1,#0x69
   \   0000A7   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    177              }break;
   \   0000AA   02....       LJMP    ??guu_mt_app_user_test_cb_0 & 0xFFFF
    178          	case GUU_RESET_NETWORK://直接有反应的
    179          	{
    180          		guu_set_panid(0xffff);
   \                     ??guu_mt_app_user_test_cb_6:
   \   0000AD                ; Setup parameters for call to function guu_set_panid
   \   0000AD   7AFF         MOV     R2,#-0x1
   \   0000AF   7BFF         MOV     R3,#-0x1
   \   0000B1   12....       LCALL   ??guu_set_panid?relay
    181          		
    182              if(zgWriteStartupOptions (ZG_STARTUP_SET, ZCD_STARTOPT_DEFAULT_NETWORK_STATE) ==ZSuccess)
   \   0000B4                ; Setup parameters for call to function zgWriteStartupOptions
   \   0000B4   7A02         MOV     R2,#0x2
   \   0000B6   79FF         MOV     R1,#-0x1
   \   0000B8   12....       LCALL   ??zgWriteStartupOptions?relay
   \   0000BB   E9           MOV     A,R1
   \   0000BC   700C         JNZ     ??guu_mt_app_user_test_cb_11
    183          		{
    184               SystemReset();
   \   0000BE   C2AF         CLR     0xa8.7
   \   0000C0   C2AF         CLR     0xa8.7
   \   0000C2   75C9AB       MOV     0xc9,#-0x55
   \   0000C5   75C95B       MOV     0xc9,#0x5b
   \                     ??guu_mt_app_user_test_cb_12:
   \   0000C8   80FE         SJMP    ??guu_mt_app_user_test_cb_12
    185          		}else
    186          		{
    187          			SystemResetSoft();
   \                     ??guu_mt_app_user_test_cb_11:
   \   0000CA                ; Setup parameters for call to function Onboard_soft_reset
   \   0000CA   12....       LCALL   Onboard_soft_reset & 0xFFFF
    188          		}
    189          		//osal_set_event(Guu_TaskID,GUU_RESET_TO_NEW_NETWORK);
    190          		//如果再发送一个event(osal_set_event)，实时性反应就不会100％，好像要2-3重复，所以用timerEx试试
    191          		//osal_start_timerEx
    192          	}break;
   \   0000CD   8068         SJMP    ??guu_mt_app_user_test_cb_0
    193          	case GUU_GET_IO_CMD://把４个ｓｗ＿ａｒｒ的命令，返回
    194          	{
    195          			uint8*pointer;
    196          			pointer = guu_get_io_cmd();
   \                     ??guu_mt_app_user_test_cb_7:
   \   0000CF                ; Setup parameters for call to function guu_get_io_cmd
   \   0000CF   12....       LCALL   ??guu_get_io_cmd?relay
   \   0000D2   8A..         MOV     ?V0 + 0,R2
   \   0000D4   8B..         MOV     ?V0 + 1,R3
    197          		  //MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_APP), GUU_IOCMD_RET,
    198                //                          4*sizeof(guu_io_opera_t)+11, pointer );
    199          			guu_usart(pointer,4*sizeof(io_cmd_data_t)+11);
   \   0000D6                ; Setup parameters for call to function guu_usart
   \   0000D6   791B         MOV     R1,#0x1b
    200          			guu_osal_mem_free(pointer);  
    201          	}break;
   \                     ??guu_mt_app_user_test_cb_13:
   \   0000D8   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   0000DB   805A         SJMP    ??guu_mt_app_user_test_cb_0
    202          	case GUU_GET_RGBA_VALUE:
    203          	{
    204          		  //MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_APP), GUU_RGBA_RET,
    205                //                          sizeof(RGBA_t), (uint8*)RGBA);		
    206          			uint8*pointer;
    207          			pointer = guu_build_pack(PWM_ALL,sizeof(RGBA_t), (uint8*)RGBA);
   \                     ??guu_mt_app_user_test_cb_8:
   \   0000DD                ; Setup parameters for call to function guu_build_pack
   \   0000DD   90....       MOV     DPTR,#RGBA
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   FC           MOV     R4,A
   \   0000E2   A3           INC     DPTR
   \   0000E3   E0           MOVX    A,@DPTR
   \   0000E4   FD           MOV     R5,A
   \   0000E5   7A04         MOV     R2,#0x4
   \   0000E7   7914         MOV     R1,#0x14
   \   0000E9   12....       LCALL   ??guu_build_pack?relay
   \   0000EC   8A..         MOV     ?V0 + 0,R2
   \   0000EE   8B..         MOV     ?V0 + 1,R3
    208          			guu_usart(pointer,sizeof(RGBA_t)+11);
   \   0000F0                ; Setup parameters for call to function guu_usart
   \   0000F0   790F         MOV     R1,#0xf
   \   0000F2   80E4         SJMP    ??guu_mt_app_user_test_cb_13
    209          			guu_osal_mem_free(pointer); 
    210          	}break;
    211          	case GUU_GET_IO_STAT:
    212          	{
    213          			//８个ｉｏ＋４个按键　＋４个ｐｗｍ
    214          			uint8*pointer;
    215          			pointer = guu_get_iostat(PWM_RGBA_HEX);
   \                     ??guu_mt_app_user_test_cb_10:
   \   0000F4                ; Setup parameters for call to function guu_get_iostat
   \   0000F4   790C         MOV     R1,#0xc
   \   0000F6   12....       LCALL   ??guu_get_iostat?relay
   \   0000F9   8A..         MOV     ?V0 + 0,R2
   \   0000FB   8B..         MOV     ?V0 + 1,R3
    216          			guu_usart(pointer,3+11);
   \   0000FD                ; Setup parameters for call to function guu_usart
   \   0000FD   790E         MOV     R1,#0xe
   \   0000FF   12....       LCALL   ?Subroutine2 & 0xFFFF
    217          			guu_osal_mem_free(pointer);
    218          	}break;
   \                     ??CrossCallReturnLabel_6:
   \   000102   8033         SJMP    ??guu_mt_app_user_test_cb_0
    219          	case GUU_SEND_REMOTE://不同于MT_AF的功能，这儿最多传2个字节到远端，执行功能，类如xx xx ed 11,远端打开 P1_1
    220          	{
    221          		if(ptr->p1 != INVALID_NODE_ADDR)
   \                     ??guu_mt_app_user_test_cb_9:
   \   000104   8E82         MOV     DPL,R6
   \   000106   8F83         MOV     DPH,R7
   \   000108   A3           INC     DPTR
   \   000109   A3           INC     DPTR
   \   00010A   A3           INC     DPTR
   \   00010B   A3           INC     DPTR
   \   00010C   E0           MOVX    A,@DPTR
   \   00010D   64FE         XRL     A,#0xfe
   \   00010F   7003         JNZ     ??guu_mt_app_user_test_cb_14
   \   000111   A3           INC     DPTR
   \   000112   E0           MOVX    A,@DPTR
   \   000113   F4           CPL     A
   \                     ??guu_mt_app_user_test_cb_14:
   \   000114   6021         JZ      ??guu_mt_app_user_test_cb_0
    222          		{	
    223          			guu_wire_send(ptr->p1, 2, (uint8*)ptr->p2);	
   \   000116                ; Setup parameters for call to function guu_wire_send
   \   000116   8E82         MOV     DPL,R6
   \   000118   8F83         MOV     DPH,R7
   \   00011A   A3           INC     DPTR
   \   00011B   A3           INC     DPTR
   \   00011C   A3           INC     DPTR
   \   00011D   A3           INC     DPTR
   \   00011E   A3           INC     DPTR
   \   00011F   A3           INC     DPTR
   \   000120   E0           MOVX    A,@DPTR
   \   000121   FC           MOV     R4,A
   \   000122   A3           INC     DPTR
   \   000123   E0           MOVX    A,@DPTR
   \   000124   FD           MOV     R5,A
   \   000125   7902         MOV     R1,#0x2
   \   000127   8E82         MOV     DPL,R6
   \   000129   8F83         MOV     DPH,R7
   \   00012B   A3           INC     DPTR
   \   00012C   A3           INC     DPTR
   \   00012D   A3           INC     DPTR
   \   00012E   A3           INC     DPTR
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   FA           MOV     R2,A
   \   000131   A3           INC     DPTR
   \   000132   E0           MOVX    A,@DPTR
   \   000133   FB           MOV     R3,A
   \   000134   12....       LCALL   ??guu_wire_send?relay
    224          		}
    225          	}break;
    226            default:break;
    227            }
    228            
    229            return ZSuccess;
   \                     ??guu_mt_app_user_test_cb_0:
   \   000137   7900         MOV     R1,#0x0
   \   000139   7402         MOV     A,#0x2
   \   00013B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00013E   7F02         MOV     R7,#0x2
   \   000140   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000143                REQUIRE _A_IEN0
   \   000143                REQUIRE WDCTL
    230          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ??guu_usart?relay
   \   000003                ; Setup parameters for call to function guu_osal_mem_free
   \   000003                ; Setup parameters for call to function guu_osal_mem_free
   \   000003   AA..         MOV     R2,?V0 + 0
   \   000005   AB..         MOV     R3,?V0 + 1
   \   000007   12....       LCALL   ??guu_osal_mem_free?relay
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   EE           MOV     A,R6
   \   000001   2404         ADD     A,#0x4
   \   000003   FA           MOV     R2,A
   \   000004   EF           MOV     A,R7
   \   000005   3400         ADDC    A,#0x0
   \   000007   FB           MOV     R3,A
   \   000008   22           RET
    231          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    232          void guu_mt_app_msg_cb( mtSysAppMsg_t*pkt )
   \                     guu_mt_app_msg_cb:
    233          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 6
   \   000004   74FA         MOV     A,#-0x6
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    234          	//FE 01 69 00 00 68 00 00 00 00 00 05 31 FE FF ED 11 
    235          	//MT_APP_MSG的返回,pkt->appData前5个字节分别是 Destaddress + destEndpoint+ClusterID
    236          	uint8  len;
                 	       ^
Warning[Pe177]: variable "len" was declared but never referenced
    237          	uint8* p;
                 	       ^
Warning[Pe177]: variable "p" was declared but never referenced
    238          
    239          	base_pack_t bpt;
    240          	
    241          	if(pkt->appDataLen > 6)
   \   000009   8A82         MOV     DPL,R2
   \   00000B   8B83         MOV     DPH,R3
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   C3           CLR     C
   \   000012   9407         SUBB    A,#0x7
   \   000014   4063         JC      ??guu_mt_app_msg_cb_0
    242          	{
    243          		bpt.madt = (mt_app_msg_data_t*)pkt->appData;
   \   000016   EA           MOV     A,R2
   \   000017   2404         ADD     A,#0x4
   \   000019   F8           MOV     R0,A
   \   00001A   EB           MOV     A,R3
   \   00001B   3400         ADDC    A,#0x0
   \   00001D   F9           MOV     R1,A
   \   00001E   8882         MOV     DPL,R0
   \   000020   8983         MOV     DPH,R1
   \   000022   E0           MOVX    A,@DPTR
   \   000023   FA           MOV     R2,A
   \   000024   A3           INC     DPTR
   \   000025   E0           MOVX    A,@DPTR
   \   000026   FB           MOV     R3,A
   \   000027   85..82       MOV     DPL,?XSP + 0
   \   00002A   85..83       MOV     DPH,?XSP + 1
   \   00002D   EA           MOV     A,R2
   \   00002E   F0           MOVX    @DPTR,A
   \   00002F   A3           INC     DPTR
   \   000030   EB           MOV     A,R3
   \   000031   F0           MOVX    @DPTR,A
    244          		bpt.flag = FROM_RS232;
   \   000032   7402         MOV     A,#0x2
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   E4           CLR     A
   \   000038   F0           MOVX    @DPTR,A
    245          		bpt.len = pkt->appData[5];
   \   000039   8882         MOV     DPL,R0
   \   00003B   8983         MOV     DPH,R1
   \   00003D   E0           MOVX    A,@DPTR
   \   00003E   FA           MOV     R2,A
   \   00003F   A3           INC     DPTR
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F583         MOV     DPH,A
   \   000043   8A82         MOV     DPL,R2
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   A3           INC     DPTR
   \   000049   A3           INC     DPTR
   \   00004A   E0           MOVX    A,@DPTR
   \   00004B   C0E0         PUSH    A
   \   00004D   7403         MOV     A,#0x3
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   D0E0         POP     A
   \   000054   F0           MOVX    @DPTR,A
    246          		bpt.data = (uint8*)&pkt->appData[6];
   \   000055   8882         MOV     DPL,R0
   \   000057   8983         MOV     DPH,R1
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   2406         ADD     A,#0x6
   \   00005C   F8           MOV     R0,A
   \   00005D   A3           INC     DPTR
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   3400         ADDC    A,#0x0
   \   000061   F9           MOV     R1,A
   \   000062   7404         MOV     A,#0x4
   \   000064   12....       LCALL   ?XSTACK_DISP0_8
   \   000067   E8           MOV     A,R0
   \   000068   F0           MOVX    @DPTR,A
   \   000069   A3           INC     DPTR
   \   00006A   E9           MOV     A,R1
   \   00006B   F0           MOVX    @DPTR,A
    247          		//guu_usart(p,len);
    248          		center_proc(&bpt);
   \   00006C                ; Setup parameters for call to function center_proc
   \   00006C   85..82       MOV     DPL,?XSP + 0
   \   00006F   85..83       MOV     DPH,?XSP + 1
   \   000072   AA82         MOV     R2,DPL
   \   000074   AB83         MOV     R3,DPH
   \   000076   12....       LCALL   ??center_proc?relay
    249          	}
    250          }
   \                     ??guu_mt_app_msg_cb_0:
   \   000079   7406         MOV     A,#0x6
   \   00007B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007E   D083         POP     DPH
   \   000080   D082         POP     DPL
   \   000082   02....       LJMP    ?BRET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??guu_mt_af_req?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    guu_mt_af_req

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??guu_mt_app_user_test_cb?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    guu_mt_app_user_test_cb

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??guu_mt_app_msg_cb?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    guu_mt_app_msg_cb

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     guu_mt_af_req                      1      0     22
       -> osal_msg_allocate             0      0     38
       -> osal_memcpy                   0      0     44
       -> MT_TransportAlloc             0      0     38
       -> MT_BuildSPIMsg                0      0     42
       -> MT_UartCalcFCS                0      0     38
       -> MT_AfDataRequest              0      0     38
       -> osal_msg_deallocate           0      0     38
       -> osal_msg_deallocate           0      0     38
     guu_mt_app_msg_cb                  3      0      6
       -> center_proc                   4      0     12
     guu_mt_app_user_test_cb            1      0     12
       -> HalLedSet                     0      0     24
       -> exec_io                       0      0     24
       -> exec_io_cmd                   0      0     24
       -> reset_key_cmd                 0      0     24
       -> guu_io_opera                  0      0     24
       -> HalLedSet                     0      0     24
       -> MT_BuildAndSendZToolResponse
                                        0      0     24
       -> guu_set_panid                 0      0     24
       -> zgWriteStartupOptions         0      0     24
       -> Onboard_soft_reset            0      0     24
       -> guu_get_io_cmd                0      0     24
       -> guu_usart                     0      0     24
       -> guu_osal_mem_free             0      0     24
       -> guu_build_pack                0      0     24
       -> guu_usart                     0      0     24
       -> guu_osal_mem_free             0      0     24
       -> guu_get_iostat                0      0     24
       -> guu_usart                     0      0     24
       -> guu_osal_mem_free             0      0     24
       -> guu_wire_send                 0      0     24


   Segment part sizes:

     Function/Label                  Bytes
     --------------                  -----
     _A_IEN0                            1
     WDCTL                              1
     guu_mt_af_req                    299
     ?Subroutine3                       7
     ?Subroutine4                      10
     ?Subroutine0                       8
     guu_mt_app_user_test_cb          323
     ?Subroutine2                      11
     ?Subroutine1                       9
     guu_mt_app_msg_cb                133
     ??guu_mt_af_req?relay              6
     ??guu_mt_app_user_test_cb?relay    6
     ??guu_mt_app_msg_cb?relay          6

 
 800 bytes in segment BANKED_CODE
  18 bytes in segment BANK_RELAYS
   2 bytes in segment SFR_AN
 
 818 bytes of CODE memory
   0 bytes of DATA memory (+ 2 bytes shared)

Errors: none
Warnings: 2
