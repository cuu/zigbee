###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.40338/W32 for 8051         25/Jan/2015  16:46:46 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Componen #
#                          ts\hal\common\hal_assert.c                         #
#    Command line       =  -f "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\..\..\..\Too #
#                          ls\CC2530DB\f8wCoord.cfg" (-DCPU32MHZ              #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\..\..\..\Too #
#                          ls\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO            #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "C:\Texas                   #
#                          Instruments\ZStack-CC2530-2.5.1a\Components\hal\co #
#                          mmon\hal_assert.c" -D ZTOOL_P1 -D MT_TASK -D       #
#                          MT_AF_FUNC -D MT_AF_CB_FUNC -D MT_APP_FUNC -D      #
#                          MT_DEBUG_FUNC -D MT_NWK_FUNC -D MT_NWK_CB_FUNC -D  #
#                          MT_SYS_FUNC -D MT_SYS_FUNC -D MT_ZDO_FUNC -D       #
#                          MT_UTIL_FUNC -D MT_ZDO_CB_FUNC -D MT_ZDO_MGMT -D   #
#                          LCD_SUPPORTED=FALSE -D HAL_LCD=FALSE -D            #
#                          HAL_LED=FALSE -D GUU_HAL_LED=TRUE -D NV_INIT -D    #
#                          NV_RESTORE -D xPOWER_SAVING -lC "C:\Texas          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\Coordinator\List\" -lA    #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\Coordinator\Lis #
#                          t\" --diag_suppress Pe001,Pa010 -o "C:\Texas       #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\Coordinator\Obj\" -e      #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\" -I         #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\Source\" -I  #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\..\..\ZMain\ #
#                          TI2530DB\" -I "C:\Texas Instruments\ZStack-CC2530- #
#                          2.5.1a\Projects\zstack\Samples\GenericApp\CC2531\. #
#                          .\..\..\..\..\Components\hal\include\" -I          #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\..\..\..\..\ #
#                          Components\hal\target\CC2530USB\" -I "C:\Texas     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \hal\target\CC2530USB\usb\library\" -I "C:\Texas   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \hal\target\CC2530USB\usb\library\cc2531\" -I      #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\GenericApp\CC2531\..\..\..\..\..\ #
#                          Components\hal\target\CC2530USB\usb\class_cdc\"    #
#                          -I "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\GenericApp\CC2531\..\..\..\..\ #
#                          ..\Components\mac\include\" -I "C:\Texas           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mac\high_level\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mac\low_level\srf04\" -I "C:\Texas                #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mac\low_level\srf04\single_chip\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \mt\" -I "C:\Texas Instruments\ZStack-CC2530-2.5.1 #
#                          a\Projects\zstack\Samples\GenericApp\CC2531\..\..\ #
#                          ..\..\..\Components\osal\include\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \services\saddr\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \services\sdata\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\af\" -I "C:\Texas                           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\nwk\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\sapi\" -I "C:\Texas                         #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\sec\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\sys\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \stack\zdo\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\..\..\..\Components #
#                          \zmac\" -I "C:\Texas Instruments\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\GenericApp\CC2531\..\. #
#                          .\..\..\..\Components\zmac\f8w\" -I "C:\Texas      #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\GenericApp\CC2531\..\..\weikong\Source\"    #
#                          -Ohz --require_prototypes                          #
#    List file          =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\GenericApp\CC2531\Coordinator\List #
#                          \hal_assert.lst                                    #
#    Object file        =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\GenericApp\CC2531\Coordinator\Obj\ #
#                          hal_assert.r51                                     #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-CC2530-2.5.1a\Components\hal\common\hal_assert.c
      1          /**************************************************************************************************
      2            Filename:       hal_assert.c
      3            Revised:        $Date: 2010-11-22 08:13:43 -0800 (Mon, 22 Nov 2010) $
      4            Revision:       $Revision: 24480 $
      5          
      6            Description:    Describe the purpose and contents of the file.
      7          
      8          
      9            Copyright 2006-2010 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          
     41          /* ------------------------------------------------------------------------------------------------
     42           *                                          Includes
     43           * ------------------------------------------------------------------------------------------------
     44           */
     45          #include "hal_assert.h"
     46          #include "hal_types.h"
     47          #include "hal_board.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x9d
   \   unsigned char volatile __sfr SLEEPSTA
   \                     SLEEPSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x9e
   \   unsigned char volatile __sfr CLKCONSTA
   \                     CLKCONSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xbe
   \   unsigned char volatile __sfr SLEEPCMD
   \                     SLEEPCMD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc6
   \   unsigned char volatile __sfr CLKCONCMD
   \                     CLKCONCMD:
   \   000000                DS 1
     48          #include "hal_defs.h"
     49          #include "hal_mcu.h"
     50          
     51          #if (defined HAL_MCU_AVR) || (defined HAL_MCU_CC2430) || (defined HAL_MCU_CC2530) || \
     52              (defined HAL_MCU_CC2533) || (defined HAL_MCU_MSP430)
     53            /* for access to debug data */
     54          #include "mac_rx.h"
     55          #include "mac_tx.h"
     56          #endif
     57          
     58          /* ------------------------------------------------------------------------------------------------
     59           *                                       Local Prototypes
     60           * ------------------------------------------------------------------------------------------------
     61           */
     62          void halAssertHazardLights(void);
     63          
     64          
     65          /**************************************************************************************************
     66           * @fn          halAssertHandler
     67           *
     68           * @brief       Logic to handle an assert.
     69           *
     70           * @param       none
     71           *
     72           * @return      none
     73           **************************************************************************************************
     74           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     75          void halAssertHandler(void)
   \                     halAssertHandler:
     76          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     77            /* execute code that handles asserts */
     78          #ifdef ASSERT_RESET
     79            HAL_SYSTEM_RESET();
     80          #elif !defined ASSERT_WHILE
     81            halAssertHazardLights();
   \   000004                ; Setup parameters for call to function halAssertHazardLights
   \   000004   12....       LCALL   ??halAssertHazardLights?relay
     82          #else
     83            while(1);
     84          #endif
     85          }
   \   000007   D083         POP     DPH
   \   000009   D082         POP     DPL
   \   00000B   02....       LJMP    ?BRET
     86          
     87          #if !defined ASSERT_WHILE
     88          /**************************************************************************************************
     89           * @fn          halAssertHazardLights
     90           *
     91           * @brief       Blink LEDs to indicate an error.
     92           *
     93           * @param       none
     94           *
     95           * @return      none
     96           **************************************************************************************************
     97           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     98          void halAssertHazardLights(void)
   \                     halAssertHazardLights:
     99          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    100            enum
    101            {
    102              DEBUG_DATA_RSTACK_HIGH_OFS,
    103              DEBUG_DATA_RSTACK_LOW_OFS,
    104              DEBUG_DATA_TX_ACTIVE_OFS,
    105              DEBUG_DATA_RX_ACTIVE_OFS,
    106          
    107          #if (defined HAL_MCU_AVR) || (defined HAL_MCU_CC2430)
    108              DEBUG_DATA_INT_MASK_OFS,
    109          #elif (defined HAL_MCU_CC2530) || (defined HAL_MCU_CC2533)
    110              DEBUG_DATA_INT_MASK0_OFS,
    111              DEBUG_DATA_INT_MASK1_OFS,
    112          #endif
    113          
    114              DEBUG_DATA_SIZE
    115            };
    116          
    117            uint8 buttonHeld;
                         ^
Warning[Pe550]: variable "buttonHeld" was set but never used
    118            uint8 debugData[DEBUG_DATA_SIZE];
    119          
    120            /* disable all interrupts before anything else */
    121            HAL_DISABLE_INTERRUPTS();
   \   000004   C2AF         CLR     0xa8.7
    122          
    123            /*-------------------------------------------------------------------------------
    124             *  Initialize LEDs and turn them off.
    125             */
    126            HAL_BOARD_INIT();
   \   000006   53BEFB       ANL     0xbe,#0xfb
   \                     ??halAssertHazardLights_0:
   \   000009   E59D         MOV     A,0x9d
   \   00000B   A2E6         MOV     C,0xE0 /* A   */.6
   \   00000D   50FA         JNC     ??halAssertHazardLights_0
   \   00000F   00           NOP
   \   000010   78F8         MOV     R0,#-0x8
   \   000012   7901         MOV     R1,#0x1
   \                     ??halAssertHazardLights_1:
   \   000014   00           NOP
   \   000015   E8           MOV     A,R0
   \   000016   24FF         ADD     A,#-0x1
   \   000018   18           DEC     R0
   \   000019   E9           MOV     A,R1
   \   00001A   34FF         ADDC    A,#-0x1
   \   00001C   F9           MOV     R1,A
   \   00001D   E8           MOV     A,R0
   \   00001E   49           ORL     A,R1
   \   00001F   70F3         JNZ     ??halAssertHazardLights_1
   \   000021   75C680       MOV     0xc6,#-0x80
   \                     ??halAssertHazardLights_2:
   \   000024   7480         MOV     A,#-0x80
   \   000026   659E         XRL     A,0x9e
   \   000028   70FA         JNZ     ??halAssertHazardLights_2
   \   00002A   43BE04       ORL     0xbe,#0x4
   \   00002D   906270       MOV     DPTR,#0x6270
   \   000030   7408         MOV     A,#0x8
   \   000032   F0           MOVX    @DPTR,A
    127          
    128          	
    129            HAL_TURN_OFF_LED1();
   \   000033   C290         CLR     0x90.0
    130            HAL_TURN_OFF_LED2();
   \   000035   C291         CLR     0x90.1
    131            HAL_TURN_OFF_LED3();
   \   000037   C286         CLR     0x80.6
    132            HAL_TURN_OFF_LED4();
   \   000039   C287         CLR     0x80.7
    133          	
    134            /*------------------------------------------------------------------------------
    135             *  Master infinite loop.
    136             */
    137            for (;;)
    138            {
    139              buttonHeld = 0;
    140          
    141              /*-------------------------------------------------------------------------------
    142               *  "Hazard lights" loop.  A held keypress will exit this loop.
    143               */
    144              /*
    145              do
    146              {
    147          //      HAL_LED_BLINK_DELAY(); //czv7
    148          
    149          #if (HAL_NUM_LEDS >= 1)
    150                //HAL_TOGGLE_LED1();
    151          #if (HAL_NUM_LEDS >= 2)
    152                //HAL_TOGGLE_LED2();
    153          #if (HAL_NUM_LEDS >= 3)
    154                //HAL_TOGGLE_LED3();
    155          #if (HAL_NUM_LEDS >= 4)
    156                //HAL_TOGGLE_LED4();
    157                
    158          #endif
    159          #endif
    160          #endif
    161          #endif
    162          
    163                {
    164                  static uint8 escape = 0;
    165                  if (escape)
    166                  {
    167                    escape = 0;
    168                    return;
    169                  }
    170                }
    171          
    172             
    173                if (HAL_PUSH_BUTTON1())
    174                {
    175                  buttonHeld++;
    176                }
    177                else
    178                {
    179                  buttonHeld = 0;
    180                }
    181              }
    182              while (buttonHeld != 10);  
    183            
    184              */
    185              /*-------------------------------------------------------------------------------
    186               *  Just exited from "hazard lights" loop.
    187               */
    188          
    189              /* turn off all LEDs */
    190          	/*
    191              HAL_TURN_OFF_LED1();
    192              HAL_TURN_OFF_LED2();
    193              HAL_TURN_OFF_LED3();
    194              HAL_TURN_OFF_LED4();
    195          	*/
    196              /* wait for button release */
    197              HAL_DEBOUNCE(!HAL_PUSH_BUTTON1());
   \                     ??halAssertHazardLights_3:
   \   00003B   7800         MOV     R0,#0x0
   \   00003D   7900         MOV     R1,#0x0
   \                     ??halAssertHazardLights_4:
   \   00003F   A280         MOV     C,0x80.0
   \   000041   5004         JNC     ??halAssertHazardLights_5
   \   000043   7800         MOV     R0,#0x0
   \   000045   7900         MOV     R1,#0x0
   \                     ??halAssertHazardLights_5:
   \   000047   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   00004A   40F3         JC      ??halAssertHazardLights_4
    198          
    199              /*-------------------------------------------------------------------------------
    200               *  Load debug data into memory.
    201               */
    202          #ifdef HAL_MCU_AVR
    203              {
    204                uint8 * pStack;
    205                pStack = (uint8 *) SP;
    206                pStack++; /* point to return address on stack */
    207                debugData[DEBUG_DATA_RSTACK_HIGH_OFS] = *pStack;
    208                pStack++;
    209                debugData[DEBUG_DATA_RSTACK_LOW_OFS] = *pStack;
    210              }
    211              debugData[DEBUG_DATA_INT_MASK_OFS] = EIMSK;
    212          #endif
    213          
    214          #if (defined HAL_MCU_CC2430)
    215              debugData[DEBUG_DATA_INT_MASK_OFS] = RFIM;
    216          #elif (defined HAL_MCU_CC2530) || (defined HAL_MCU_CC2533)
    217              debugData[DEBUG_DATA_INT_MASK0_OFS] = RFIRQM0;
   \   00004C   9061A3       MOV     DPTR,#0x61a3
   \   00004F   E0           MOVX    A,@DPTR
    218              debugData[DEBUG_DATA_INT_MASK1_OFS] = RFIRQM1;
   \   000050   A3           INC     DPTR
   \   000051   E0           MOVX    A,@DPTR
    219          #endif
    220          
    221          
    222          #if (defined HAL_MCU_AVR) || (defined HAL_MCU_CC2430) || (defined HAL_MCU_CC2530) || \
    223              (defined HAL_MCU_CC2533) || (defined HAL_MCU_MSP430)
    224              debugData[DEBUG_DATA_TX_ACTIVE_OFS] = macTxActive;
    225              debugData[DEBUG_DATA_RX_ACTIVE_OFS] = macRxActive;
    226          #endif
    227          
    228             /* initialize for data dump loop */
    229              {
    230                uint8 iBit;
    231                uint8 iByte;
    232          
    233                iBit  = 0;
   \   000052   7B00         MOV     R3,#0x0
    234                iByte = 0;
   \   000054   7A00         MOV     R2,#0x0
    235          
    236                /*-------------------------------------------------------------------------------
    237                 *  Data dump loop.  A button press cycles data bits to an LED.
    238                 */
    239                while (iByte < DEBUG_DATA_SIZE)
    240                {
    241                  /* wait for key press */
    242                  while(!HAL_PUSH_BUTTON1());
   \                     ??halAssertHazardLights_6:
   \   000056   A280         MOV     C,0x80.0
   \   000058   50FC         JNC     ??halAssertHazardLights_6
    243          
    244                  /* turn on all LEDs for first bit of byte, turn on three LEDs if not first bit */
    245                  /*
    246                  HAL_TURN_ON_LED1();
    247                  HAL_TURN_ON_LED2();
    248                  HAL_TURN_ON_LED3();
    249                  */
    250                  if (iBit == 0)
    251                  {
    252                    //HAL_TURN_ON_LED4();
    253                  }
    254                  else
    255                  {
    256                    //HAL_TURN_OFF_LED4();
    257                  }
    258          
    259                  /* wait for debounced key release */
    260                  HAL_DEBOUNCE(!HAL_PUSH_BUTTON1());
   \   00005A   7800         MOV     R0,#0x0
   \   00005C   7900         MOV     R1,#0x0
   \                     ??halAssertHazardLights_7:
   \   00005E   A280         MOV     C,0x80.0
   \   000060   5004         JNC     ??halAssertHazardLights_8
   \   000062   7800         MOV     R0,#0x0
   \   000064   7900         MOV     R1,#0x0
   \                     ??halAssertHazardLights_8:
   \   000066   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   000069   40F3         JC      ??halAssertHazardLights_7
    261          
    262                  /* turn off all LEDs */
    263          		/*
    264                  HAL_TURN_OFF_LED1();
    265                  HAL_TURN_OFF_LED2();
    266                  HAL_TURN_OFF_LED3();
    267                  HAL_TURN_OFF_LED4();
    268          		*/
    269                  /* output value of data bit to LED1 */
    270                  if (debugData[iByte] & (1 << (7 - iBit)))
    271                  {
    272                    //HAL_TURN_ON_LED1();
    273                  }
    274                  else
    275                  {
    276                    //HAL_TURN_OFF_LED1();
    277                  }
    278          
    279                  /* advance to next bit */
    280                  iBit++;
   \   00006B   0B           INC     R3
    281                  if (iBit == 8)
   \   00006C   7408         MOV     A,#0x8
   \   00006E   6B           XRL     A,R3
   \   00006F   70E5         JNZ     ??halAssertHazardLights_6
    282                  {
    283                    iBit = 0;
   \   000071   7B00         MOV     R3,#0x0
    284                    iByte++;
   \   000073   0A           INC     R2
    285                  }
    286                }
   \   000074   EA           MOV     A,R2
   \   000075   C3           CLR     C
   \   000076   9406         SUBB    A,#0x6
   \   000078   40DC         JC      ??halAssertHazardLights_6
    287              }
    288          
    289              /*
    290               *  About to enter "hazard lights" loop again.  Turn off LED1 in case the last bit
    291               *  displayed happened to be one.  This guarantees all LEDs are off at the start of
    292               *  the flashing loop which uses a toggle operation to change LED states.
    293               */
    294              HAL_TURN_OFF_LED1();
   \   00007A   C290         CLR     0x90.0
   \   00007C   80BD         SJMP    ??halAssertHazardLights_3
   \   00007E                REQUIRE _A_IEN0
   \   00007E                REQUIRE SLEEPCMD
   \   00007E                REQUIRE SLEEPSTA
   \   00007E                REQUIRE CLKCONCMD
   \   00007E                REQUIRE CLKCONSTA
   \   00007E                REQUIRE _A_P1
   \   00007E                REQUIRE _A_P0
    295            }
    296          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   E8           MOV     A,R0
   \   000001   2401         ADD     A,#0x1
   \   000003   08           INC     R0
   \   000004   E9           MOV     A,R1
   \   000005   3400         ADDC    A,#0x0
   \   000007   F9           MOV     R1,A
   \   000008   C3           CLR     C
   \   000009   E8           MOV     A,R0
   \   00000A   94F4         SUBB    A,#-0xc
   \   00000C   E9           MOV     A,R1
   \   00000D   9401         SUBB    A,#0x1
   \   00000F   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000011   65D0         XRL     A,PSW
   \   000013   33           RLC     A
   \   000014   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halAssertHandler?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halAssertHandler

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halAssertHazardLights?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halAssertHazardLights
    297          #endif
    298          
    299          /* ------------------------------------------------------------------------------------------------
    300           *                                    Compile Time Assertions
    301           * ------------------------------------------------------------------------------------------------
    302           */
    303          
    304          /* integrity check of type sizes */
    305          HAL_ASSERT_SIZE(  int8, 1);
    306          HAL_ASSERT_SIZE( uint8, 1);
    307          HAL_ASSERT_SIZE( int16, 2);
    308          HAL_ASSERT_SIZE(uint16, 2);
    309          HAL_ASSERT_SIZE( int32, 4);
    310          HAL_ASSERT_SIZE(uint32, 4);
    311          
    312          
    313          /**************************************************************************************************
    314          */

   Maximum stack usage in bytes:

     Function                   ISTACK PSTACK XSTACK
     --------                   ------ ------ ------
     halAssertHandler               2      0      0
       -> halAssertHazardLights     4      0      0
     halAssertHazardLights          2      0      0


   Segment part sizes:

     Function/Label                Bytes
     --------------                -----
     _A_P0                            1
     _A_P1                            1
     SLEEPSTA                         1
     CLKCONSTA                        1
     _A_IEN0                          1
     SLEEPCMD                         1
     CLKCONCMD                        1
     halAssertHandler                14
     halAssertHazardLights          126
     ?Subroutine0                    21
     ??halAssertHandler?relay         6
     ??halAssertHazardLights?relay    6

 
 161 bytes in segment BANKED_CODE
  12 bytes in segment BANK_RELAYS
   7 bytes in segment SFR_AN
 
 173 bytes of CODE memory
   0 bytes of DATA memory (+ 7 bytes shared)

Errors: none
Warnings: 1
